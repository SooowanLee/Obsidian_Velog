---
상태: 진행중
tags:
  - SQL
  - 트랜잭션
  - DB
시작일: 2024-06-16
마감일:
---
## 트랜잭션이란
> 데이터베이스의 상태를 변화시키는 하나의 논리적인 작업 단위
> 데이터의 무결성, 일관성을 유지하기 위해 중요한 역할을 한다.

## ACID 특성
### Atomictiy(원자성)
- 트랜잭션의 모든 연산이 **완벽하게 수행되거나 전혀 수행되지 않아야**  한다.
- 트랜잭션 내의 **모든 연산은 하나의 단위, 부분적으로 수행되는 일은 없**다.
	- 성공적으로 수행되면 Commit(커밋), 실패하면 Rollback(롤백)

예를들어, A가 B에게 100,000원을 송금한다.
1. A계좌에서 100,000원을 차감
2. B계좌에 100,000원을 추가

A계좌에서 100,000원을 먼저 차감합니다. 중간에 에러가 발생해서 B에게 100,000원을 추가할 수 없게 되었습니다. 그럼 트랜잭션 RollBack을 하여 A계좌에서 차감했던 첫번째 연산 결과도 취소됩니다. 따라서 A계좌에서 100,000원이 차감되고 B계좌에 100,000원이 추가되는 상황을 방지할 수 있습니다.
```SQL
BEGIN TRANSACTION; 
UPDATE accounts SET balance = balance - 100 WHERE account_id = 'A'; 
-- 오류 발생, 트랜잭션 롤백 
ROLLBACK;
```

### Consistency(일관성)
- 트랜잭션 전과 후에 데이터베이스가 일관된 상태를 유지해야 한다.
- 
